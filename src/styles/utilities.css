
@layer utilities {
  .glass-card {
    @apply bg-white/80 dark:bg-gray-950/80 backdrop-blur-lg border border-white/20 dark:border-gray-800/20;
  }

  .gradient-border {
    @apply relative before:absolute before:inset-0 before:-z-10 before:p-[1px] before:rounded-lg before:content-[''];
  }

  .hover-card {
    @apply transition-all duration-300 hover:scale-[1.02] hover:shadow-xl;
  }

  .shimmer {
    @apply relative overflow-hidden before:absolute before:inset-0 before:-translate-x-full before:animate-shimmer before:bg-gradient-to-r before:from-transparent before:via-white/20 before:to-transparent;
  }

  /* Enhanced contrast utilities */
  .high-contrast-text {
    @apply text-foreground font-medium;
  }

  .high-contrast-border {
    @apply border-2;
  }

  .high-contrast-focus {
    @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;
  }

  /* Dynamic theme gradient utilities */
  .dynamic {
    /* Gradient Card Component */
    .gradient-card {
      @apply relative overflow-hidden rounded-lg shadow-md transition-all;
      background: var(--gradient-surface);
      backdrop-filter: blur(10px);
      border: 1px solid;
      border-image: var(--gradient-border);
      border-image-slice: 1;
      
      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15);
      }
    }

    /* Gradient Border */
    .gradient-border {
      @apply relative before:absolute before:inset-0 before:-z-10 before:p-[1px] before:rounded-lg before:content-[''];
      &::before {
        background: var(--gradient-primary);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask-composite: exclude;
        -webkit-mask-composite: xor;
      }
    }

    /* Gradient Text */
    .gradient-text {
      @apply bg-clip-text text-transparent transition-colors;
      background-image: var(--gradient-primary);
    }

    /* Gradient Hover Effect */
    .gradient-hover {
      @apply transition-all duration-300;
      &:hover {
        background-image: var(--gradient-background);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      }
    }

    /* Active Gradient Element */
    .gradient-active {
      background-image: var(--gradient-primary);
      @apply text-primary-foreground;
    }
    
    /* Gradient Button */
    .gradient-button {
      @apply relative overflow-hidden shadow-md;
      background-image: var(--gradient-primary);
      transition: all 0.3s ease;

      &:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      &:active {
        transform: translateY(1px);
      }
    }
    
    /* High Contrast Components for Dynamic Mode */
    .card, 
    .button,
    .input,
    .select {
      border-color: var(--dynamic-border);
    }
    
    .card {
      background-color: var(--dynamic-card);
      color: var(--dynamic-text);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      
      &:hover {
        background-color: var(--dynamic-card-hover);
      }
    }
    
    .button {
      @apply font-medium;
    }
    
    .dropdown-menu {
      background-color: var(--dynamic-card);
      border-color: var(--dynamic-border);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    }
    
    /* Fix z-index for dropdowns */
    .dropdown-content {
      @apply z-50;
    }
  }

  /* Additional utility for dynamic theme compatibility */
  .gradient-text-hover {
    @apply transition-all duration-300;
    &:hover {
      @apply bg-clip-text text-transparent;
      background-image: var(--gradient-primary);
    }
  }
  
  /* High contrast focus and interactive states */
  .dynamic .focus-visible {
    box-shadow: var(--focus-ring);
  }
  
  /* Ensure text readability on gradient backgrounds */
  .gradient-bg-text {
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
}
